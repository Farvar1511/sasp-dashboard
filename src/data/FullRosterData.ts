// Define an interface for the template structure
export interface RosterTemplateEntry {
  badge?: string;
  callsign?: string;
  certifications: {
    ACU?: string | null;
    CIU?: string | null;
    FTO?: string | null;
    Heat?: string | null; // Note: Case difference
    K9?: string | null;
    MOTO?: string | null;
    OVERWATCH?: string | null;
    SWAT?: string | null;
    [key: string]: string | null | undefined;
  };
  cid?: string;
  discordId?: string;
  email?: string;
  isActive?: boolean;
  "isadmin?"?: boolean;
  loaEndDate?: string | null;
  loaStartDate?: string | null;
  name?: string;
  rank?: string;
  role?: string;
  notes?: string; // Added optional notes field
  discipline?: string; // Added optional discipline field
  notesIssuedAt?: string | null; // Added optional timestamp for notes
  disciplineIssuedAt?: string | null; // Added optional timestamp for discipline
}

const fullRosterTemplate: RosterTemplateEntry[] = [
  {
    badge: "101",
    callsign: "1E-1",
    certifications: {
      ACU: "CERT",
      CIU: "SUPER",
      FTO: "SUPER",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "SUPER",
    },
    cid: "",
    discordId: "172228348397748000",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Nicolas Sturniolo",
    rank: "Commissioner",
    role: "",
  },
  {
    badge: "",
    callsign: "1E-2",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Assistant Deputy Commissioner",
    role: "",
  },
  {
    badge: "",
    callsign: "1E-3",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Assistant Commissioner",
    role: "",
  },
  {
    badge: "110",
    callsign: "1E-4",
    certifications: {
      ACU: "",
      CIU: "SUPER",
      FTO: "SUPER",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "SUPER",
    },
    cid: "",
    discordId: "569711769703153684",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Casey Hatch",
    rank: "Commander",
    role: "",
  },
  {
    badge: "200",
    callsign: "1E-5",
    certifications: {
      ACU: "CERT",
      CIU: "SUPER",
      FTO: "SUPER",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "LEAD",
    },
    cid: "",
    discordId: "1092500664531292190",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Jacob Ainsworth",
    rank: "Commander",
    role: "",
  },
  {
    badge: "",
    callsign: "1B-100",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Captain",
    role: "",
  },
  {
    badge: "",
    callsign: "1R-110",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Lieutenant",
    role: "",
  },
  {
    badge: "204",
    callsign: "1K-100",
    certifications: {
      ACU: "CERT",
      CIU: "CERT",
      FTO: "LEAD",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "CERT",
    },
    cid: "",
    discordId: "597913379125985000",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Rodney Farvar",
    rank: "Staff Sergeant",
    role: "",
  },
  {
    badge: "205",
    callsign: "1K-101",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Staff Sergeant",
    role: "",
  },
  {
    badge: "208",
    callsign: "1K-102",
    certifications: {
      ACU: "SUPER",
      CIU: "SUPER",
      FTO: "SUPER",
      Heat: "SUPER",
      K9: "SUPER",
      MOTO: "SUPER",
      OVERWATCH: null,
      SWAT: "SUPER",
    },
    cid: "",
    discordId: "237013651986622593",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Abdul Mousa",
    rank: "Staff Sergeant",
    role: "",
  },
  {
    badge: "111",
    callsign: "1K-103",
    certifications: {
      ACU: "SUPER",
      CIU: "SUPER",
      FTO: "SUPER",
      Heat: "SUPER",
      K9: "SUPER",
      MOTO: "SUPER",
      OVERWATCH: null,
      SWAT: "SUPER",
    },
    cid: "",
    discordId: "479444893839697391",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Jimmy Sweet",
    rank: "Staff Sergeant",
    role: "",
  },
  {
    badge: "",
    callsign: "1K-200",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Sergeant",
    role: "",
  },
  {
    badge: "",
    callsign: "1K-201",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Sergeant",
    role: "",
  },
  {
    badge: "206",
    callsign: "1Y-200",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "CERT",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "90643745124392960",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Charles Wiggins",
    rank: "Corporal",
    role: "",
  },
  {
    badge: "205",
    callsign: "1Y-201",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "CERT",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "123961486711193601",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Mitri Adams",
    rank: "Corporal",
    role: "",
  },
  {
    badge: "203",
    callsign: "1Y-202",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Corporal",
    role: "",
  },
  {
    badge: "",
    callsign: "1Y-203",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Corporal",
    role: "",
  },
  {
    badge: "211",
    callsign: "1L-10",
    certifications: {
      ACU: "CERT",
      CIU: "",
      FTO: "",
      Heat: "CERT",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "TRAIN",
    },
    cid: "",
    discordId: "651906460208463873",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Viktor Petrov",
    rank: "Trooper First Class",
    role: "",
  },
  {
    badge: "212",
    callsign: "1L-11",
    certifications: {
      ACU: "",
      CIU: "CERT",
      FTO: "",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "1071436804290515046",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "John Knight",
    rank: "Trooper First Class",
    role: "",
  },
  {
    badge: "207",
    callsign: "1L-12",
    certifications: {
      ACU: "CERT",
      CIU: "",
      FTO: "CERT",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "TRAIN",
    },
    cid: "",
    discordId: "295184101768917172",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Scott Gregory",
    rank: "Trooper First Class",
    role: "",
  },
  {
    badge: "209",
    callsign: "1L-13",
    certifications: {
      ACU: "CERT",
      CIU: "",
      FTO: "",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "TRAIN",
    },
    cid: "",
    discordId: "595095579385411329",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Ace Spade",
    rank: "Trooper First Class",
    role: "",
  },
  {
    badge: "213",
    callsign: "1L-14",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "TRAIN",
    },
    cid: "",
    discordId: "125596126551220341",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Declan Day",
    rank: "Trooper First Class",
    role: "",
  },
  {
    badge: "210",
    callsign: "1L-15",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "801611864357237022",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Andrew Cohen",
    rank: "Trooper First Class",
    role: "",
  },
  {
    badge: "203",
    callsign: "1L-16",
    certifications: {
      ACU: "CERT",
      CIU: "",
      FTO: "",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "495418549114386369",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Matthew Corvinus",
    rank: "Trooper First Class",
    role: "",
  },
  {
    badge: "214",
    callsign: "2L-40",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "CERT",
      K9: "",
      MOTO: "CERT",
      OVERWATCH: null,
      SWAT: "TRAIN",
    },
    cid: "",
    discordId: "334572089329713157",
    email: "",
    isActive: true,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "Luke Thorne",
    rank: "Trooper",
    role: "",
  },
  {
    badge: "",
    callsign: "2L-41",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Trooper",
    role: "",
  },
  {
    badge: "",
    callsign: "2L-42",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Trooper",
    role: "",
  },
  {
    badge: "",
    callsign: "2L-43",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Trooper",
    role: "",
  },
  {
    badge: "",
    callsign: "2L-44",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Trooper",
    role: "",
  },
  {
    badge: "",
    callsign: "2L-45",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Trooper",
    role: "",
  },
  {
    badge: "",
    callsign: "5D-50",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Cadet",
    role: "",
  },
  {
    badge: "",
    callsign: "5D-51",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Cadet",
    role: "",
  },
  {
    badge: "",
    callsign: "5D-52",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Cadet",
    role: "",
  },
  {
    badge: "",
    callsign: "5D-53",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Cadet",
    role: "",
  },
  {
    badge: "",
    callsign: "5D-54",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Cadet",
    role: "",
  },
  {
    badge: "",
    callsign: "5D-55",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Cadet",
    role: "",
  },
  {
    badge: "",
    callsign: "5D-56",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Cadet",
    role: "",
  },
  {
    badge: "",
    callsign: "5D-57",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Cadet",
    role: "",
  },
  {
    badge: "",
    callsign: "5D-58",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Cadet",
    role: "",
  },
  {
    badge: "",
    callsign: "5D-59",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Cadet",
    role: "",
  },
  {
    badge: "",
    callsign: "5D-60",
    certifications: {
      ACU: "",
      CIU: "",
      FTO: "",
      Heat: "",
      K9: "",
      MOTO: "",
      OVERWATCH: null,
      SWAT: "",
    },
    cid: "",
    discordId: "",
    email: "",
    isActive: false,
    "isadmin?": false,
    loaEndDate: null,
    loaStartDate: null,
    name: "VACANT",
    rank: "Cadet",
    role: "",
  },
];

// Default export for the template array
export default fullRosterTemplate;

// Named export for the normalization function
export const normalizeTemplateCertKeys = (certs: {
  [key: string]: any;
}): { [key: string]: CertStatus } => {
  const normalized: { [key: string]: CertStatus } = {};
  const keyMap: { [key: string]: string } = {
    // Map template keys to Firestore keys
    heat: "HEAT",
    moto: "MOTO",
    acu: "ACU",
    swat: "SWAT",
    ciu: "CIU",
    k9: "K9",
    fto: "FTO",
    overwatch: "OVERWATCH",
  };
  // Ensure these match the keys used elsewhere (certificationKeys, divisionKeys)
  const expectedKeys = [
    "HEAT",
    "MOTO",
    "ACU",
    "SWAT",
    "CIU",
    "K9",
    "FTO",
    "OVERWATCH",
  ];

  for (const key in certs) {
    const lowerKey = key.toLowerCase();
    const mappedKey = keyMap[lowerKey] || key.toUpperCase(); // Use mapped key or uppercase
    if (expectedKeys.includes(mappedKey)) {
      const value = certs[key];
      // Ensure value matches CertStatus type (LEAD, SUPER, CERT, or null)
      if (value === "LEAD" || value === "SUPER" || value === "CERT") {
        normalized[mappedKey] = value;
      } else {
        normalized[mappedKey] = null; // Treat empty strings or other values as null
      }
    }
  }
  // Ensure all expected keys exist, even if null
  expectedKeys.forEach((expKey) => {
    if (!(expKey in normalized)) {
      normalized[expKey] = null;
    }
  });
  return normalized;
};

// Define CertStatus type if not already globally available
type CertStatus = "LEAD" | "SUPER" | "CERT" | null;

// Define RosterUser interface
export interface RosterUser {
  id: string;
  name: string;
  rank: string;
  badge?: string;
  callsign?: string;
  certifications?: { [key: string]: CertStatus };
  loaStartDate?: string | Timestamp; // Keep Timestamp for Firestore data
  loaEndDate?: string | Timestamp; // Keep Timestamp for Firestore data
  isActive?: boolean;
  discordId?: string;
  email?: string;
  isPlaceholder?: boolean;
  category?: string | null;
  notes?: string; // Notes field
  discipline?: string; // Discipline field
  notesIssuedAt?: Timestamp; // Added timestamp for notes
  disciplineIssuedAt?: Timestamp; // Added timestamp for discipline
}

// Define Timestamp type if not globally available (e.g., if not importing from firebase)
// This is just a placeholder if 'Timestamp' isn't recognized from imports
// import { Timestamp } from "firebase/firestore"; // Ensure this import exists where needed
type Timestamp = {
  toDate: () => Date;
  // Add other Timestamp properties/methods if needed
};
